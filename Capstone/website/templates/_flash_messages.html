{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {# Use a consistent ID for common JS targeting #}
        {# This container will be positioned absolutely to overlay the center #}
        <div id="flash-messages-overlay-container" class="fixed inset-0 z-50 flex items-center justify-center 
                                                            p-4 flash-message-local 
                                                            {% if messages|length > 1 %}fade-in-animation{% else %}hidden{% endif %}">
            <div class="flash-message-overlay-content
                        {% for category, message in messages %}
                            {% if loop.first %}
                                {% if category == 'success' %}
                                    bg-success-bg text-success-text border border-success-border
                                {% elif category == 'error' %}
                                    bg-[#d9534f] text-white border-[#d9534f]
                                {% else %}
                                    bg-gray-200 text-gray-800 border-gray-300
                                {% endif %}
                            {% elif category == 'success' %}
                                bg-success-bg text-success-text border border-success-border
                            {% elif category == 'error' %}
                                bg-[#d9534f] text-white border-[#d9534f]
                            {% else %}
                                bg-gray-200 text-gray-800 border-gray-300
                            {% endif %}
                            {% endfor %}
                        ">
                {% for category, message in messages %}
                    <div class="flex items-center gap-2 p-3 
                                {% if not loop.last %}border-b border-gray-300/50{% endif %}">
                        {# Icon based on category - you can expand this #}
                        {% if category == 'success' %}
                            <i class="fas fa-check-circle text-green-600"></i>
                        {% elif category == 'error' %}
                            <i class="fas fa-times-circle text-red-500"></i>
                        {% elif category == 'info' %}
                            <i class="fas fa-info-circle text-blue-500"></i>
                        {% endif %}
                        <span class="text-sm font-medium">
                            {{ message }}
                        </span>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
{% endwith %}