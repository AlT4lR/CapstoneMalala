<!-- website/templates/schedules.html -->
{% extends "base.html" %}
{% block title %}DecoOffice - Schedules{% endblock %}

{% block head %}
<meta name="csrf-token" content="{{ csrf_token() }}">
<!-- FullCalendar CSS & JS -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.13/index.global.min.js'></script>
<style>
    /* Custom styles to match the new UI theme */
    .fc {
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    .fc .fc-toolbar.fc-header-toolbar {
        margin-bottom: 1.5em;
        color: #3a4d39;
    }
    .fc .fc-toolbar-title {
        font-size: 1.5em;
        font-weight: 700;
    }
    .fc .fc-button {
        background-color: #3a4d39;
        border-color: #3a4d39;
        color: white;
    }
    .fc .fc-button:hover {
        background-color: #4b5e4a;
        border-color: #4b5e4a;
    }
    .fc-event-main {
        padding: 4px 6px;
    }
    .event-label-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        margin-right: 8px;
        flex-shrink: 0;
    }
    .fc-v-event {
        border-color: #6f8a6e;
    }
    /* Active view button styling */
    .view-btn.bg-white.shadow {
        color: #3a4d39;
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
<main class="flex-1 p-4 sm:p-6 lg:p-8 flex flex-col bg-[#f6f7f1]">
    
    <!-- Header -->
    <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <div>
            <h2 class="text-3xl font-bold text-[#3a4d39] uppercase tracking-wide">Schedules</h2>
            <p class="text-gray-500 text-sm mt-1">Manage your events and appointments.</p>
        </div>
        <div class="flex items-center gap-4">
            {% include "_notification_button.html" %}
        </div>
    </header>

    <!-- Calendar Layout -->
    <div class="flex-1 flex flex-col md:flex-row gap-6 overflow-hidden">
        
        <!-- Left Panel: View Controls -->
        <aside class="w-full md:w-56 bg-white p-4 rounded-lg border border-gray-200 shadow-sm flex flex-col gap-4">
            <h3 class="font-bold text-lg text-[#3a4d39]">Views</h3>
            <div class="bg-gray-100 p-1 rounded-lg flex flex-col gap-1">
                <button id="day-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md hover:bg-white hover:shadow">Day View</button>
                <button id="week-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md bg-white shadow">Week View</button>
                <button id="month-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md hover:bg-white hover:shadow">Month View</button>
                <button id="year-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md hover:bg-white hover:shadow">Year View</button>
            </div>
            <hr>
            <div>
                 <h3 class="font-bold text-lg text-[#3a4d39] mb-2">Labels</h3>
                 <div class="space-y-2 text-sm">
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #3b82f6;"></span><span>Office</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #8b5cf6;"></span><span>Meetings</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #ec4899;"></span><span>Events</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #f59e0b;"></span><span>Personal</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #6b7280;"></span><span>Others</span></div>
                </div>
            </div>
        </aside>

        <!-- Right Panel: Main Calendar -->
        <div class="flex-1 bg-white p-4 rounded-lg border border-gray-200 shadow-sm overflow-hidden">
            <div id="calendar" class="h-full"></div>
        </div>
    </div>
</main>

<!-- Use the existing modal template from the codebase -->
{% include "_create_schedule_modal.html" %}

{% endblock %}

{% block scripts %}
<!-- Load the correct, backend-connected calendar script -->
<script src="{{ url_for('static', filename='js/calendar.js') }}"></script>
{% endblock %}