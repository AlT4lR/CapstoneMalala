<!-- website/templates/schedules.html -->
{% extends "base.html" %}
{% block title %}DecoOffice - Schedules{% endblock %}

{% block head %}
<meta name="csrf-token" content="{{ csrf_token() }}">
<!-- FullCalendar CSS & JS -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.13/index.global.min.js'></script>

<!-- âœ… Year View plugin (must load before calendar.js) -->
<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/year-view@6.1.13/index.global.min.js'></script>

<style>
/* Match dashboard color scheme */
:root {
  --primary-green: #3a4d39;
  --primary-green-hover: #4b5e4a;
  --bg-light: #f6f7f1;
  --card-bg: #ffffff;
  --text-muted: #6b6b6b;
  --border-color: #e0e0e0;
}

/* Overall layout */
.fc {
  height: 100%;
  display: flex;
  flex-direction: column;
  background-color: var(--card-bg);
  border-radius: 12px;
  padding: 1rem;
}

/* Toolbar */
.fc .fc-toolbar.fc-header-toolbar {
  margin-bottom: 1.25em;
  color: var(--primary-green);
}
.fc .fc-toolbar-title {
  font-size: 1.4em;
  font-weight: 700;
}
.fc .fc-button {
  background-color: var(--primary-green);
  border: none;
  color: white;
  font-weight: 600;
  border-radius: 8px;
  padding: 6px 12px;
  transition: background-color 0.2s ease;
}
.fc .fc-button:hover {
  background-color: var(--primary-green-hover);
}

/* Calendar grid */
.fc-theme-standard td, 
.fc-theme-standard th {
  border-color: var(--border-color);
}
.fc-daygrid-day-frame {
  background-color: var(--bg-light);
  border-radius: 6px;
}
.fc-daygrid-day:hover {
  background-color: #eef0ea;
}

/* Events */
.fc-event {
  background-color: var(--primary-green);
  border: none;
  border-radius: 8px;
  padding: 2px 6px;
  color: #fff;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

/* Year view and custom labels */
.fc-yearGridMonth-frame {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: #fafaf7;
}
.fc-yearGridMonth-name {
  font-weight: 700;
  color: var(--primary-green);
  margin-bottom: 0.25rem;
}

/* Left panel (Views & Labels) */
aside {
  background-color: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}
.view-btn {
  transition: all 0.2s ease;
}
.view-btn.bg-white.shadow {
  color: var(--primary-green);
  font-weight: 600;
}
</style>

{% endblock %}

{% block content %}
<main class="flex-1 p-4 sm:p-6 lg:p-8 flex flex-col bg-[#f6f7f1]">
    
    <!-- Header -->
    <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <div>
            <h2 class="text-3xl font-bold text-[#3a4d39] uppercase tracking-wide">Schedules</h2>
            <p class="text-gray-500 text-sm mt-1">Manage your events and appointments.</p>
        </div>
        <div class="flex items-center gap-4">
            <!-- "Create Schedule" button removed from here -->
            {% include "_notification_button.html" %}
        </div>
    </header>

    <!-- Calendar Layout -->
    <div class="flex-1 flex flex-col md:flex-row gap-6 overflow-hidden">
        
        <!-- Left Panel: View Controls -->
        <aside class="w-full md:w-56 bg-white p-4 rounded-lg border border-gray-200 shadow-sm flex flex-col gap-4">
            <h3 class="font-bold text-lg text-[#3a4d39]">Views</h3>
            <div class="bg-gray-100 p-1 rounded-lg flex flex-col gap-1">
                <button id="day-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md hover:bg-white hover:shadow">Day View</button>
                <button id="week-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md bg-white shadow">Week View</button>
                <button id="month-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md hover:bg-white hover:shadow">Month View</button>
                <button id="year-view-btn" class="view-btn px-3 py-1.5 text-left text-sm font-medium text-gray-600 rounded-md hover:bg-white hover:shadow">Year View</button>
            </div>
            <hr>
            <div>
                 <h3 class="font-bold text-lg text-[#3a4d39] mb-2">Labels</h3>
                 <div class="space-y-2 text-sm">
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #3b82f6;"></span><span>Office</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #8b5cf6;"></span><span>Meetings</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #ec4899;"></span><span>Events</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #f59e0b;"></span><span>Personal</span></div>
                    <div class="flex items-center gap-3"><span class="event-label-dot" style="background-color: #6b7280;"></span><span>Others</span></div>
                </div>
            </div>
        </aside>

        <!-- Right Panel: Main Calendar -->
        <div class="flex-1 bg-white p-4 rounded-lg border border-gray-200 shadow-sm overflow-hidden">
            <div id="calendar" class="h-full"></div>
        </div>
    </div>
</main>

<!-- Use the existing modal template from the codebase -->
{% include "_create_schedule_modal.html" %}

{% endblock %}

{% block scripts %}
<!-- Load the correct, backend-connected calendar script -->
<script src="{{ url_for('static', filename='js/calendar.js') }}"></script>
{% endblock %}